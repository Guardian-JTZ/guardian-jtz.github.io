"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[122],{90079:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>p});var s=t(74848),r=t(28453);const a={sidebar_position:37,tags:["Easy","Linux","\u6587\u4ef6\u4e0a\u4f20","\u4fe1\u606f\u6cc4\u9732","\u5bc6\u7801\u91cd\u7528","SUDO"],title:"Tech_Supp0rt: 1",description:"Tech_Supp0rt: 1",sidebar_label:"Tech_Supp0rt: 1",slug:"/tryhackme/37"},i="Tech_Supp0rt: 1",o={id:"box/TryHackMe/37",title:"Tech_Supp0rt: 1",description:"Tech_Supp0rt: 1",source:"@site/docs/box/TryHackMe/37.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/37",permalink:"/docs/tryhackme/37",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u6587\u4ef6\u4e0a\u4f20",permalink:"/docs/tags/\u6587\u4ef6\u4e0a\u4f20"},{label:"\u4fe1\u606f\u6cc4\u9732",permalink:"/docs/tags/\u4fe1\u606f\u6cc4\u9732"},{label:"\u5bc6\u7801\u91cd\u7528",permalink:"/docs/tags/\u5bc6\u7801\u91cd\u7528"},{label:"SUDO",permalink:"/docs/tags/sudo"}],version:"current",sidebarPosition:37,frontMatter:{sidebar_position:37,tags:["Easy","Linux","\u6587\u4ef6\u4e0a\u4f20","\u4fe1\u606f\u6cc4\u9732","\u5bc6\u7801\u91cd\u7528","SUDO"],title:"Tech_Supp0rt: 1",description:"Tech_Supp0rt: 1",sidebar_label:"Tech_Supp0rt: 1",slug:"/tryhackme/37"},sidebar:"boxSidebar",previous:{title:"Corridor",permalink:"/docs/tryhackme/36"},next:{title:"kiba",permalink:"/docs/tryhackme/38"}},c={},p=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"139/445 - SMB",id:"139445---smb",level:2},{value:"80",id:"80",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"www-data",id:"www-data",level:3},{value:"www-data --&gt; scamsite",id:"www-data----scamsite",level:3},{value:"scamsite --&gt; root",id:"scamsite----root",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"tech_supp0rt-1",children:"Tech_Supp0rt: 1"}),"\n",(0,s.jsx)(n.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-42-53:~/techsupp0rt1# nmap -sT -p- --min-rate 1000 10.10.36.136\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-08-25 04:18 BST\nNmap scan report for ip-10-10-36-136.eu-west-1.compute.internal (10.10.36.136)\nHost is up (0.0054s latency).\nNot shown: 65531 closed ports\nPORT    STATE SERVICE\n22/tcp  open  ssh\n80/tcp  open  http\n139/tcp open  netbios-ssn\n445/tcp open  microsoft-ds\nMAC Address: 02:2A:59:7C:1B:7F (Unknown)\n\nNmap done: 1 IP address (1 host up) scanned in 3.31 seconds\nroot@ip-10-10-42-53:~/techsupp0rt1# nmap -sTCV -p 22,80,139,445 --min-rate 1000 10.10.36.136\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-08-25 04:20 BST\nNmap scan report for ip-10-10-36-136.eu-west-1.compute.internal (10.10.36.136)\nHost is up (0.00022s latency).\n\nPORT    STATE SERVICE     VERSION\n22/tcp  open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.10 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 10:8a:f5:72:d7:f9:7e:14:a5:c5:4f:9e:97:8b:3d:58 (RSA)\n|   256 7f:10:f5:57:41:3c:71:db:b5:5b:db:75:c9:76:30:5c (ECDSA)\n|_  256 6b:4c:23:50:6f:36:00:7c:a6:7c:11:73:c1:a8:60:0c (EdDSA)\n80/tcp  open  http        Apache httpd 2.4.18 ((Ubuntu))\n|_http-server-header: Apache/2.4.18 (Ubuntu)\n|_http-title: Apache2 Ubuntu Default Page: It works\n139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n445/tcp open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)\nMAC Address: 02:2A:59:7C:1B:7F (Unknown)\nService Info: Host: TECHSUPPORT; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nHost script results:\n|_clock-skew: mean: -1s, deviation: 0s, median: -1s\n| smb-os-discovery: \n|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)\n|   Computer name: techsupport\n|   NetBIOS computer name: TECHSUPPORT\\x00\n|   Domain name: \\x00\n|   FQDN: techsupport\n|_  System time: 2023-08-25T08:50:31+05:30\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n| smb2-security-mode: \n|   2.02: \n|_    Message signing enabled but not required\n| smb2-time: \n|   date: 2023-08-25 04:20:33\n|_  start_date: 1600-12-31 23:58:45\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 17.27 seconds\n"})}),"\n",(0,s.jsx)(n.h2,{id:"139445---smb",children:"139/445 - SMB"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'root@ip-10-10-42-53:~/techsupp0rt1# smbmap.py -H 10.10.36.136\n\n    ________  ___      ___  _______   ___      ___       __         _______\n   /"       )|"  \\    /"  ||   _  "\\ |"  \\    /"  |     /""\\       |   __ "\\\n  (:   \\___/  \\   \\  //   |(. |_)  :) \\   \\  //   |    /    \\      (. |__) :)\n   \\___  \\    /\\  \\/.    ||:     \\/   /\\   \\/.    |   /\' /\\  \\     |:  ____/\n    __/  \\   |: \\.        |(|  _  \\  |: \\.        |  //  __\'  \\    (|  /\n   /" \\   :) |.  \\    /:  ||: |_)  :)|.  \\    /:  | /   /  \\   \\  /|__/ \\\n  (_______/  |___|\\__/|___|(_______/ |___|\\__/|___|(___/    \\___)(_______)\n -----------------------------------------------------------------------------\n     SMBMap - Samba Share Enumerator | Shawn Evans - ShawnDEvans@gmail.com   \n                     https://github.com/ShawnDEvans/smbmap\n\n                                                                                                    \n[+] IP: 10.10.36.136:445\tName: ip-10-10-36-136.eu-west-1.compute.internal\tStatus: Guest session   \t\n        Disk                                                  \tPermissions\tComment\n\t----                                                  \t-----------\t-------\n\tprint$                                            \tNO ACCESS\tPrinter Drivers\n\twebsvr                                            \tREAD ONLY\t\n\tIPC$                                              \tNO ACCESS\tIPC Service (TechSupport server (Samba, Ubuntu))\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u53d1\u73b0\u5bf9\u5e94 websvr \u5177\u6709\u8bfb\u53d6\u6743\u9650, \u8fdb\u884c\u67e5\u770b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'root@ip-10-10-42-53:~/techsupp0rt1# smbclient  -N  //10.10.36.136/websvr\nWARNING: The "syslog" option is deprecated\nTry "help" to get a list of possible commands.\nsmb: \\> ls\n  .                                   D        0  Sat May 29 08:17:38 2021\n  ..                                  D        0  Sat May 29 08:03:47 2021\n  enter.txt                           N      273  Sat May 29 08:17:38 2021\n\n\t\t8460484 blocks of size 1024. 5575836 blocks available\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u4e0b\u8f7d\u6587\u4ef6\u8fdb\u884c\u67e5\u770b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"oot@ip-10-10-42-53:~/techsupp0rt1# cat enter.txt \nGOALS\n=====\n1)Make fake popup and host it online on Digital Ocean server\n2)Fix subrion site, /subrion doesn't work, edit from panel\n3)Edit wordpress website\n\nIMP\n===\nSubrion creds\n|->admin:7sKvntXdPEJaxazce9PXi24zaFrLiKWCk [cooked with magical formula]\nWordpress creds\n|->\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u544a\u8bc9\u6211\u4eec\u4e00\u4e9b\u4e8b\u60c5:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e00\u4e2a\u5168\u662f\u5e7f\u544a\u5f39\u7a97\u7684\u754c\u9762"}),"\n",(0,s.jsx)(n.li,{children:"subrion  : \u7ad9\u70b9\u56e0\u4e3a\u914d\u7f6e\u539f\u56e0\u65e0\u6cd5\u4f7f\u7528, \u67e5\u8be2\u53d1\u73b0\u5176\u662f\u4e00\u4e2a CMS \u7cfb\u7edf"}),"\n",(0,s.jsx)(n.li,{children:"\u6709\u4e00\u4e2a wordpress \u7ad9\u70b9"}),"\n",(0,s.jsxs)(n.li,{children:["\u4e00\u4e2a\u8d26\u53f7, \u5bc6\u7801\u8fdb\u884c\u4e86\u52a0\u5bc6, \u731c\u6d4b\u5176\u7528\u9014\u4e3a wordpress \u6216\u8005 subrion \u7684\u5bc6\u7801 \u4f7f\u7528 ",(0,s.jsx)(n.a,{href:"https://gchq.github.io/CyberChef/#recipe=From_Base58('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz',false)From_Base32('A-Z2-7=',false)From_Base64('A-Za-z0-9+/=',true,false)",children:"CyberChef"})," \u89e3\u5bc6"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"80",children:"80"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-42-53:~/techsupp0rt1# gobuster dir -u http://10.10.36.136/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -x php,txt===============================================================\nGobuster v3.0.1\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.36.136/\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Status codes:   200,204,301,302,307,401,403\n[+] User Agent:     gobuster/3.0.1\n[+] Extensions:     php,txt\n[+] Timeout:        10s\n===============================================================\n2023/08/25 04:21:34 Starting gobuster\n===============================================================\n/wordpress (Status: 301)\n/test (Status: 301)\n/phpinfo.php (Status: 200)\n/server-status (Status: 403)\n===============================================================\n2023/08/25 04:25:38 Finished\n===============================================================\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6839\u636e\u5185\u5bb9\u8fdb\u884c\u5206\u6790:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"wordpress  : \u5c31\u662f\u4e0a\u9762\u8bf4\u7684wordpress \u7ad9\u70b9"}),"\n",(0,s.jsx)(n.li,{children:"test : \u5c31\u662f\u4e0a\u9762\u8bf4\u7684\u5e7f\u544a\u5f39\u7a97\u9875\u9762"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u7136\u540e\u6211\u8bbf\u95ee ",(0,s.jsx)(n.code,{children:"/subrion"})," \u53d1\u73b0\u4e0d\u80fd\u8bbf\u95ee, \u67e5\u770b\u6d4f\u89c8\u5668\u7684\u5404\u9879\u8bf7\u6c42\u540e\u6211\u53d1\u73b0, \u5f53\u6211\u4eec\u8bbf\u95ee\u540e\u4f1a\u8fdb\u884c\u4e00\u4e2a\u91cd\u5b9a\u5411, \u4f46\u662f\u91cd\u5b9a\u5411\u7684 IP \u5730\u5740\u662f\u9519\u7684, \u90a3\u4e48\u5e94\u8be5\u5c31\u662f\u8fd9\u91cc\u51fa\u95ee\u9898\u4e86,"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627204142.png",alt:"20240627204142"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627204149.png",alt:"20240627204149"})}),"\n",(0,s.jsx)(n.p,{children:"\u63a5\u7740\u6211\u5bf9\u8be5\u76ee\u5f55\u8fdb\u884c\u626b\u63cf\u53d1\u73b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"by OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.36.136/subrion\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Status codes:   200\n[+] User Agent:     gobuster/3.0.1\n[+] Extensions:     php,txt\n[+] Timeout:        10s\n===============================================================\n2023/08/25 05:02:31 Starting gobuster\n===============================================================\n/license.txt (Status: 200)\n/changelog.txt (Status: 200)\n/robots.txt (Status: 200)\n/panel.php (Status: 200)\n/panel.txt (Status: 200\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u8bbf\u95ee ",(0,s.jsx)(n.code,{children:"/panel.php"})," \u9875\u9762\u53d1\u73b0\u662f\u4e00\u4e2a\u767b\u9646\u9875\u9762, \u5e76\u4e14\u544a\u8bc9\u4e86\u6211 CMS \u7248\u672c, \u7ecf\u8fc7\u8c37\u6b4c\u67e5\u8be2\u540e\u6211\u53d1\u73b0\u4e86\u5bf9\u5e94\u7684\u5229\u7528\u811a\u672c ",(0,s.jsx)(n.a,{href:"https://github.com/hev0x/CVE-2018-19422-SubrionCMS-RCE",children:"\nCVE-2018-19422-SubrionCMS-RCE"}),", \u4f46\u662f\u8fd9\u4e2a\u7f51\u7ad9\u662f\u5b58\u5728\u95ee\u9898\u7684, \u6240\u4ee5\u6211\u4eec\u9700\u8981\u5148\u4fee\u590d\u7f51\u7ad9, \u6b64\u65f6\u6211\u4eec\u4f7f\u7528\u4e4b\u524d\u6536\u96c6\u7684\u51ed\u8bc1\u8fdb\u884c\u767b\u9646, \u5728\u540e\u53f0\u8fdb\u884c\u4fee\u590d\u7f51\u7ad9"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627204250.png",alt:"20240627204250"})}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u4eec\u4fee\u6539\u8fd9\u91cc\u7684 IP \u5730\u5740"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627204308.png",alt:"20240627204308"})}),"\n",(0,s.jsx)(n.p,{children:"\u4fdd\u5b58\u540e\u518d\u6b21\u67e5\u770b\u76ee\u5f55, \u53d1\u73b0\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u4e86"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627204326.png",alt:"20240627204326"})}),"\n",(0,s.jsx)(n.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,s.jsx)(n.h3,{id:"www-data",children:"www-data"}),"\n",(0,s.jsx)(n.p,{children:"\u4e0b\u8f7d\u811a\u672c\u8fdb\u884c\u6267\u884c"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627204346.png",alt:"20240627204346"})}),"\n",(0,s.jsx)(n.p,{children:"\u73b0\u5728\u6211\u5c06\u5176\u8f6c\u6362\u4e3a\u7a33\u5b9aShell, \u8bbf\u95ee wordpress \u914d\u7f6e\u6587\u4ef6, \u6211\u53d1\u73b0\u4e86\u6570\u636e\u5e93\u7684\u5bc6\u7801"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"/** The name of the database for WordPress */\ndefine( 'DB_NAME', 'wpdb' );\n\n/** MySQL database username */\ndefine( 'DB_USER', 'support' );\n\n/** MySQL database password */\ndefine( 'DB_PASSWORD', 'ImAScammerLOL!123!' );\n"})}),"\n",(0,s.jsx)(n.h3,{id:"www-data----scamsite",children:"www-data --\x3e scamsite"}),"\n",(0,s.jsxs)(n.p,{children:["\u4f7f\u7528\u4e0a\u9762\u5f97\u5230\u7684\u5bc6\u7801\u8fdb\u884c\u767b\u9646\u53d1\u73b0\u53ef\u4ee5\u767b\u9646\u5e76\u53d1\u73b0\u7528\u6237\u5177\u6709 ",(0,s.jsx)(n.a,{href:"https://gtfobins.github.io/gtfobins/iconv/#sudo",children:"SUDO \u7279\u6743"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627204422.png",alt:"20240627204422"})}),"\n",(0,s.jsx)(n.h3,{id:"scamsite----root",children:"scamsite --\x3e root"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240627204458.png",alt:"20240627204458"})})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var s=t(96540);const r={},a=s.createContext(r);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);